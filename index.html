<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="appTitle">Almail Suporte IA - Cartões</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cstyle%3E.circle-fill%7Bfill:%231a202c%7D.symbol-fill%7Bfill:%23ffffff;stroke:%23ffffff%7D@media(prefers-color-scheme:dark)%7B.circle-fill%7Bfill:%23c9d1d9%7D.symbol-fill%7Bfill:%23161b22;stroke:%23161b22%7D%7D%3C/style%3E%3Ccircle cx='50' cy='50' r='50' class='circle-fill'/%3E%3Cg class='symbol-fill'%3E%3Ccircle cx='30' cy='30' r='8'/%3E%3Ccircle cx='70' cy='30' r='8'/%3E%3Ccircle cx='50' cy='70' r='8'/%3E%3Cline x1='30' y1='30' x2='70' y2='30' stroke-width='4' stroke-linecap='round'/%3E%3Cline x1='30' y1='30' x2='50' y2='70' stroke-width='4' stroke-linecap='round'/%3E%3Cline x1='70' y1='30' x2='50' y2='70' stroke-width='4' stroke-linecap='round'/%3E%3C/g%3E%3C/svg%3E">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/style.css"> <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body class="antialiased">
    <div class="notification-modal-overlay" id="notification-modal-overlay">
        <div class="notification-modal-content">
            <div class="modal-icon-container">
                <svg class="almail-logo-large" width="120" height="120" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="50" cy="50" r="50" class="logo-circle-fill"/>
                    <g class="logo-symbol-fill">
                        <circle cx="30" cy="30" r="8"/>
                        <circle cx="70" cy="30" r="8"/>
                        <circle cx="50" cy="70" r="8"/>
                        <line x1="30" y1="30" x2="70" y2="30" stroke-width="4" stroke-linecap="round"/>
                        <line x1="30" y1="30" x2="50" y2="70" stroke-width="4" stroke-linecap="round"/>
                        <line x1="70" y1="30" x2="50" y2="70" stroke-width="4" stroke-linecap="round"/>
                    </g>
                </svg>
            </div>
            <h2 class="text-3xl font-bold" data-i18n="creditsModalTitle">Créditos</h2>
            <p class="text-lg" data-i18n="creditsModalSubtitle">
                Uma ferramenta de suporte inteligente para o time de Cartões do Mercado Pago.
            </p>
            <div class="credits-list" data-i18n="creditsModalDescription">
                </div>
            <button id="modal-start-button" class="start-button" data-i18n="creditsModalButton">Entendi</button>
        </div>
    </div>

    <div class="tutorial-modal-overlay" id="tutorial-modal-overlay">
        <div class="tutorial-modal-content">
            <button class="close-button" id="tutorial-close-button" aria-label="Fechar Tutorial">
                <i data-feather="x"></i>
            </button>
            <h2 class="text-3xl font-bold mb-6" data-i18n="tutorialModalTitle">Guia Rápido: Almail Suporte IA</h2>
            <div id="tutorial-content" class="text-left text-lg">
                </div>
            <button id="tutorial-ok-button" class="start-button mt-8" data-i18n="tutorialModalButton">Entendido!</button>
        </div>
    </div>

    <div class="confirmation-modal-overlay" id="confirmation-modal-overlay">
        <div class="confirmation-modal-content">
            <div class="modal-icon-container">
                <i data-feather="alert-triangle" class="text-yellow-500" style="width: 60px; height: 60px;"></i>
            </div>
            <h2 class="text-2xl font-bold mb-4" data-i18n="restartConfirmTitle">Reiniciar Conversa?</h2>
            <p class="text-lg mb-6" data-i18n="restartConfirmSubtitle">Tem certeza que deseja reiniciar a conversa? Todo o histórico será apagado.</p>
            <div class="flex justify-center gap-4">
                <button id="confirm-restart-yes" class="start-button" data-i18n="restartConfirmYes">Sim, Reiniciar</button>
                <button id="confirm-restart-no" class="start-button" data-i18n="restartConfirmNo">Não, Cancelar</button>
            </div>
        </div>
    </div>

    <div class="confirmation-modal-overlay" id="language-confirmation-modal-overlay">
        <div class="confirmation-modal-content">
            <div class="modal-icon-container">
                <i data-feather="alert-triangle" class="text-yellow-500" style="width: 60px; height: 60px;"></i>
            </div>
            <h2 class="text-2xl font-bold mb-4" data-i18n="languageConfirmTitle">Trocar Idioma?</h2>
            <p class="text-lg mb-6" data-i18n="languageConfirmSubtitle">Ao trocar o idioma, a conversa atual será apagada. Deseja continuar?</p>
            <div class="flex justify-center gap-4">
                <button id="confirm-language-yes" class="start-button" data-i18n="languageConfirmYes">Sim, Trocar</button>
                <button id="confirm-language-no" class="start-button" data-i18n="languageConfirmNo">Não, Cancelar</button>
            </div>
        </div>
    </div>

    <div class="confirmation-modal-overlay" id="custom-confirm-overlay">
        <div class="confirmation-modal-content" id="custom-confirm-content">
            <div class="modal-icon-container">
                <i data-feather="alert-triangle" class="text-yellow-500" style="width: 60px; height: 60px;"></i>
            </div>
            <h2 class="text-2xl font-bold mb-4" id="custom-confirm-message"></h2>
            <div class="flex justify-center gap-4">
                <button id="custom-confirm-yes" class="start-button" data-i18n="restartConfirmYes">Sim</button>
                <button id="custom-confirm-no" class="start-button" data-i18n="restartConfirmNo">Não</button>
            </div>
        </div>
    </div>

    <div class="app-wrapper" id="app-wrapper">
        <div class="top-section">
            <div class="chat-header">
                <div class="almail-logo-container">
                    <svg class="almail-logo" width="48" height="48" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="50" cy="50" r="50" class="logo-circle-fill"/>
                        <g class="logo-symbol-fill">
                            <circle cx="30" cy="30" r="8"/>
                            <circle cx="70" cy="30" r="8"/>
                            <circle cx="50" cy="70" r="8"/>
                            <line x1="30" y1="30" x2="70" y2="30" stroke-width="4" stroke-linecap="round"/>
                            <line x1="30" y1="30" x2="50" y2="70" stroke-width="4" stroke-linecap="round"/>
                            <line x1="70" y1="30" x2="50" y2="70" stroke-width="4" stroke-linecap="round"/>
                        </g>
                    </svg>
                    <h1 class="text-2xl font-semibold">Almail</h1>
                </div>
                <span class="header-subtitle" data-i18n="headerSubtitle">Suporte IA - Cartões</span>
                <div class="header-controls">
                    <button id="home-button" class="control-button" aria-label="Voltar para o Início" data-i18n="homeButtonAria">
                        <i data-feather="home"></i>
                    </button>
                    <button id="language-toggle-button" class="control-button language-toggle-button">
                        <i data-feather="globe"></i>
                        <span id="current-language-text">PT</span>
                    </button>
                    <button id="tutorial-button" class="control-button" aria-label="Abrir Tutorial" data-i18n="tutorialButtonAria">
                        <i data-feather="help-circle"></i>
                    </button>
                    <button id="theme-toggle" class="control-button" aria-label="Alternar Tema" data-i18n="themeToggleButtonAria">
                        <span id="theme-icon"><i data-feather="moon"></i></span>
                    </button>
                    <button id="main-sidebar-toggle-button" class="control-button" aria-label="Alternar Histórico">
                        <i data-feather="chevron-right"></i> </button>
                </div>
            </div>

            <div class="content-area" id="content-area">
                <div class="initial-screen" id="initial-screen">
                    <div class="initial-screen-content">
                        <svg class="almail-logo-large" width="120" height="120" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="50" cy="50" r="50" class="logo-circle-fill"/>
                            <g class="logo-symbol-fill">
                                <circle cx="30" cy="30" r="8"/>
                                <circle cx="70" cy="30" r="8"/>
                                <circle cx="50" cy="70" r="8"/>
                                <line x1="30" y1="30" x2="70" y2="30" stroke-width="4" stroke-linecap="round"/>
                                <line x1="30" y1="30" x2="50" y2="70" stroke-width="4" stroke-linecap="round"/>
                                <line x1="70" y1="30" x2="50" y2="70" stroke-width="4" stroke-linecap="round"/>
                            </g>
                        </svg>
                        <h2 class="text-3xl font-bold mt-6" data-i18n="initialScreenTitle">Bem-vindo(a) à Almail Suporte IA!</h2>
                        <p class="text-lg mt-4" data-i18n="initialScreenSubtitle">Sua assistente inteligente para otimizar o suporte no time de Cartões do Mercado Pago.</p>
                        <p class="text-md mt-2 text-gray-600" data-i18n="initialScreenDescription">Aqui você pode obter informações rápidas e precisas sobre diversos tópicos relacionados a cartões. Clique em "Nova Conversa" para começar a interagir com a IA.</p>
                        <button id="start-chat-button" class="start-button mt-8" data-i18n="startChatButton">Iniciar Nova Conversa</button>
                    </div>
                </div>

                <div class="chat-and-input-area hidden" id="chat-and-input-area">
                    <div class="chat-messages" id="chat-messages">
                    </div>

                    <div class="loading-indicator" id="loading-indicator">
                        <div class="spinner"></div>
                        <span data-i18n="typingIndicator">Almail está digitando...</span>
                    </div>

                    <div class="error-message hidden" id="error-message">
                        <i data-feather="alert-triangle"></i>
                        <span data-i18n="errorMessage">Ocorreu um erro. Por favor, tente novamente.</span>
                    </div>

                    <div class="chat-input-area">
                        <textarea id="user-input" class="chat-input" placeholder="Pergunte à Almail..." rows="1" data-i18n="inputPlaceholder"></textarea>
                        <button id="send-button" class="send-button" aria-label="Enviar Mensagem" data-i18n="sendButtonAria">
                            <i data-feather="send"></i>
                        </button>
                    </div>
                </div>
                <aside class="conversation-history-sidebar hidden" id="conversation-history-sidebar">
                    <div class="sidebar-header">
                        <h3 data-i18n="historyTitle">Histórico de Conversas</h3>
                        </div>
                    <ul id="history-list" class="history-list">
                        </ul>
                </aside>
            </div>
        </div>
        <footer class="app-footer">
            <p data-i18n="footerCopyright">© 2025 Almail Suporte IA. Todos os direitos reservados.</p>
            <p class="disclaimer" data-i18n="footerDisclaimer">Esta IA utiliza dados públicos e não armazena informações do Mercado Pago.</p>
        </footer>
    </div>

    <script>
        feather.replace(); // Ativa os ícones Feather
    </script>
    <script type="module" src="js/script.js"></script>
</body>
</html>
